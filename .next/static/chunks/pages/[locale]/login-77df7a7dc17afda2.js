(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{32459:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSG:function(){return k},default:function(){return N}});var n=t(67294),s=t(9008),i=t.n(s);t(80134);var a=t(50029),o=t(59499),c=t(64687),l=t.n(c),u=t(11163),d=t(83321),f=t(50480),h=t(69368),p=t(86886),m=t(98456),g=t(21737),b=t(62225),j=t(12552),x=t(21257),v=t(87311),y=t(33321),w=t(81056),O=t(85893);function _(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?_(Object(t),!0).forEach(function(r){(0,o.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var P=function(){var e,r=(0,y.Z)(),t=r.classes;r.cx;var s=(0,x.XK)().classes,i=(0,u.useRouter)(),c=(0,j.$G)("common").t,_=(0,n.useState)({email:"",password:""}),P=_[0],k=_[1],N=(0,n.useState)(!1),Z=N[0],E=N[1],T=(0,n.useState)(!1),C=T[0],M=T[1],W=(0,n.useState)(""),q=W[0],D=W[1],L=(0,n.useState)(""),I=L[0],R=L[1];(0,n.useEffect)(function(){b.WS.addValidationRule("isPasswordMatch",function(e){return e===P.password}),localStorage.getItem("token")&&i.push("/dashboard")},[i]);var X=function(e){return function(r){k(S(S({},P),{},(0,o.Z)({},e,r.target.value))),D("")}},z=(e=(0,a.Z)(l().mark(function e(){var r,t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),D(""),R(""),e.prev=3,e.next=6,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:P.email,password:P.password,rememberMe:Z})});case 6:return r=e.sent,e.next=9,r.json();case 9:if(t=e.sent,r.ok){e.next=14;break}return D(t.message||"Login failed"),M(!1),e.abrupt("return");case 14:localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user)),R("Login successful! Redirecting..."),setTimeout(function(){i.push("/dashboard")},1e3),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(3),console.error("Login error:",e.t0),D("An error occurred. Please try again."),M(!1);case 25:case"end":return e.stop()}},e,null,[[3,20]])})),function(){return e.apply(this,arguments)});return(0,O.jsx)(v.Z,{title:c("login_title"),subtitle:c("login_subtitle"),children:(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:t.head,children:(0,O.jsx)(w.Z,{head:c("login"),desc:"",align:"left",color:"secondary"})}),q&&(0,O.jsx)(g.Z,{severity:"error",style:{marginBottom:"16px"},children:q}),I&&(0,O.jsx)(g.Z,{severity:"success",style:{marginBottom:"16px"},children:I}),(0,O.jsxs)(b.WS,{onError:function(e){return console.log(e)},onSubmit:z,children:[(0,O.jsxs)(p.ZP,{container:!0,spacing:3,children:[(0,O.jsx)(p.ZP,{item:!0,xs:12,children:(0,O.jsx)(b.bM,{variant:"filled",className:t.input,label:c("login_email"),onChange:X("email"),name:"email",value:P.email,validators:["required","isEmail"],errorMessages:["This field is required","Email is not valid"],fullWidth:!0,disabled:C})}),(0,O.jsx)(p.ZP,{item:!0,xs:12,children:(0,O.jsx)(b.bM,{variant:"filled",type:"password",className:t.input,label:c("login_password"),validators:["required"],onChange:X("password"),errorMessages:["This field is required"],name:"password",value:P.password,fullWidth:!0,disabled:C})})]}),(0,O.jsx)("div",{className:t.formHelper,children:(0,O.jsx)(f.Z,{control:(0,O.jsx)(h.Z,{checked:Z,onChange:function(e){E(e.target.checked)},color:"secondary",value:Z,className:t.check,disabled:C}),label:(0,O.jsx)("span",{className:s.caption,children:c("login_remember")})})}),(0,O.jsx)("div",{className:t.btnArea,children:(0,O.jsx)(d.Z,{variant:"contained",fullWidth:!0,type:"submit",color:"secondary",size:"large",disabled:C,children:C?(0,O.jsx)(m.Z,{size:24,color:"inherit"}):c("continue")})})]})]})})},k=!0,N=function(){return(0,O.jsxs)(n.Fragment,{children:[(0,O.jsx)(i(),{children:(0,O.jsx)("title",{children:" Ventley Tech- Login"})}),(0,O.jsx)("div",{children:(0,O.jsx)(P,{})})]})}},7173:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/login",function(){return t(32459)}])}},function(e){e.O(0,[777,717,549,945,888,774,179],function(){return e(e.s=7173)}),_N_E=e.O()}]);